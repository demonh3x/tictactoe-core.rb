#!/usr/bin/env ruby

dirname = File.expand_path(File.dirname(File.dirname(__FILE__))) + "/lib"
$LOAD_PATH.unshift(dirname) unless $LOAD_PATH.include?(dirname)

require 'coordinator'
require 'cli'
require 'game'
require 'state'
require 'three_by_three_board'

coordinator = Coordinator.new(
  Game.new(State.new(ThreeByThreeBoard.new, {})), 
  [
    Cli.new($stdout, {:x => 'X', :o => 'O'})
  ],
  [
    CliPlayer.new($stdin, $stdout, :x),
    CliPlayer.new($stdin, $stdout, :o)
  ]
)

while (!coordinator.finished?)
  coordinator.step
end
